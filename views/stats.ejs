<!-- File: views/stats.ejs -->

<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <!-- Bootstrap 5 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
</head>
<body>
  <div class="container">
    <h1 class="text-center my-5"><%= title %></h1>

    <% if (message) { %>
      <div class="alert alert-danger"><%= message %></div>
    <% } %>

    <form method="post">
      <div class="row">
        <div class="col-md-4 mb-3">
          <label for="month" class="form-label">Month:</label>
          <select class="form-select" name="month" id="month" required>
            <option value="">-- Select Month --</option>
            <option value="01" <% if (month === '01') { %>selected<% } %>>January</option>
            <option value="02" <% if (month === '02') { %>selected<% } %>>February</option>
            <option value="03" <% if (month === '03') { %>selected<% } %>>March</option>
            <option value="04" <% if (month === '04') { %>selected<% } %>>April</option>
            <option value="05" <% if (month === '05') { %>selected<% } %>>May</option>
            <option value="06" <% if (month === '06') { %>selected<% } %>>June</option>
            <option value="07" <% if (month === '07') { %>selected<% } %>>July</option>
            <option value="08" <% if (month === '08') { %>selected<% } %>>August</option>
            <option value="09" <% if (month === '09') { %>selected<% } %>>September</option>
            <option value="10" <% if (month === '10') { %>selected<% } %>>October</option>
            <option value="11" <% if (month === '11') { %>selected<% } %>>November</option>
            <option value="12" <% if (month === '12') { %>selected<% } %>>December</option>
          </select>
        </div>
        <div class="col-md-4 mb-3">
          <label for="year" class="form-label">Year:</label>
          <input type="number" class="form-control" name="year" id="year" value="<%= year %>" required>
        </div>
        <div class="col-md-4 mb-3">
          <label class="form-label">&nbsp;</label>
          <button type="submit" class="btn btn-primary d-block">Show Records</button>
        </div>
      </div>
    </form>

    <% if (showTable) { %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Total Hours</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% for (let name in records) { %>
            <tr>
              <td><%= name %></td>
              <td><%= records[name].totalHours %></td>
              <td>
                <a href="/records/stats/<%= month %>/<%= year %>/<%= encodeURIComponent(name) %>" class="btn btn-primary btn-sm">View Details</a>
          </td>
        </tr>
      <% } %>
    </tbody>
  </table>
<% } %>

<div class="my-4">
  <a href="/" class="btn btn-secondary">Back</a>
</div>
  </div>
  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

